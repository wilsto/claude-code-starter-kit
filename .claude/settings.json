{
  "permissions": {
    "allow": [
      "Bash(*)",
      "Edit(*)",
      "Write(*)",
      "WebFetch",
      "WebSearch"
    ],
    "deny": [
      "Bash(rm -rf /*)",
      "Bash(rm -rf ~*)",
      "Bash(dd *)",
      "Bash(mkfs*)",
      "Bash(git push *--force*)",
      "Bash(git push *-f *)",
      "Bash(git reset --hard *)",
      "Bash(chmod -R 777 *)",
      "Bash(sudo rm *)"
    ]
  },
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/block-secrets.js\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/tdd-guard.js\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/block-secrets.js\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/tdd-guard.js\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/skill-evaluator.js\"",
            "timeout": 5
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/post-commit-lessons.js\"",
            "timeout": 5
          },
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/commit-reminder.js\"",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "If this session did meaningful work, perform these TWO updates:\n\n1. Write session handoff to memory/session-cache.json:\n   {\"lastSession\":{\"date\":\"YYYY-MM-DD\",\"done\":\"what was accomplished\",\"decisions\":\"key decisions and WHY\",\"next\":\"immediate next step\",\"gotchas\":\"non-obvious discoveries\"}}\n   Use the Write tool.\n\n2. Update memory/active-context.md:\n   - \"Current Focus\": what's being worked on\n   - \"Recent Changes\": what was done (keep last 5)\n   - \"Immediate Next Steps\": what should happen next\n   Use the Edit tool.\n\nIf no meaningful work was done, respond {\"ok\": true}.",
            "timeout": 15
          },
          {
            "type": "prompt",
            "prompt": "Did this session reveal any of these worth recording across sessions?\n- A technical lesson (platform quirk, library gotcha, debugging insight)\n- A bug fix with a non-obvious root cause\n- A new pattern or convention\n\nIf yes: update memory/MEMORY.md (index-level) or memory/patterns.md (detailed) using the Edit tool.\nIf no: respond {\"ok\": true}.",
            "timeout": 15
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/session-context.js\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/session-context.js\"",
            "timeout": 5
          }
        ]
      },
      {
        "matcher": "resume",
        "hooks": [
          {
            "type": "command",
            "command": "node \"$CLAUDE_PROJECT_DIR/.claude/hooks/session-context.js\"",
            "timeout": 5
          }
        ]
      }
    ]
  }
}
